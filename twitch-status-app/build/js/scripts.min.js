"use strict";$(function(){({channels:["freecodecamp","sing_sing","dreamhackcs","esl_sc2","jacksofamerica","ogamingsc2","faceittv","purgegamers","cretetion","habathcx","noobs2ninjas","brunofin","comster404"],elements:{controls:$(".controls"),form:$(".search-form"),container:$(".results-container")},init:function(){this.channels.forEach(function(t){this.getUserData(t)}.bind(this)),this.elements.controls.on("click",function(t){$(t.target).hasClass("btn--all")?(this.toggleControls($(t.target)),this.toggleChannels("all")):$(t.target).hasClass("btn--online")?(this.toggleControls($(t.target)),this.toggleChannels("online")):$(t.target).hasClass("btn--offline")&&(this.toggleControls($(t.target)),this.toggleChannels("offline"))}.bind(this)),this.elements.form.on("submit",function(t){t.preventDefault();var n=$(".search-form input").val();this.findChannel(n)}.bind(this))},getUserData:function(t,n){var e=n||"streams",a="https://api.twitch.tv/kraken/"+e+"/"+t+"?client_id=zw4ez3387m23jod5tuzeebtdbknd0b";$.getJSON(a).done(function(n){if(n.stream){var e={logo:n.stream.channel.logo,name:n.stream.channel.display_name,url:n.stream.channel.url,isOnline:!0,statusText:n.stream.channel.status};this.updateUI(e)}else if(n.name===t){var a={logo:n.logo,name:n.display_name,url:"https://www.twitch.tv/"+n.name,isOnline:!1,statusText:""};this.updateUI(a)}else this.getUserData(t,"users")}.bind(this)).fail(function(){var n={logo:"img/error.jpg",name:t,url:"",isOnline:!1,statusText:"account closed or not found"};this.updateUI(n)}.bind(this))},updateUI:function(t){var n=$("#channel-card").html(),e=_.template(n)(t);this.elements.container.append(e)},toggleControls:function(t){this.elements.controls.find("button").removeClass("btn--active"),t.addClass("btn--active")},toggleChannels:function(t){var n=$(".channel-card");n.hide(),"online"===t?n.each(function(){"true"===$(this).find("i").attr("data-online")&&$(this).show()}):"offline"===t?n.each(function(){"false"===$(this).find("i").attr("data-online")&&$(this).show()}):n.show()},findChannel:function(t){$(".channel-card .channel-card__name").each(function(){var n=$(this);n.text().toLowerCase()===t.toLowerCase()?n.parents(".channel-card").show():n.parents(".channel-card").hide()})}}).init()});